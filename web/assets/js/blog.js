/*! liginc_blog 2018-10-25 */

var app=angular.module("blogApp",["ui.router","ngResource"]);app.value("Settings",{accessToken:"MjRlMTZlM2YzYmZkMjdiODg5ZDU1Y2ZiMTYzNzI3ZWFiYjQxN2RlZWVlMWNiNjgwMTQ2YWQ0MGNjYTkxODhhOA",pageSize:5}),app.config(["$urlRouterProvider","$httpProvider",function(t,e){t.otherwise("/"),e.interceptors.push(["Settings",function(e){return{request:function(t){return-1!==t.url.indexOf("api/")&&(t.url+="?access_token="+e.accessToken),t}}}])}]),app.config(["$urlRouterProvider",function(t){t.when("/admin",["$window",function(t){t.location.replace("admin/")}])}]),app.config(["$stateProvider",function(t){t.state({name:"detail",url:"/detail/:id",templateUrl:"templates/single.html",resolve:{post:["Posts","$stateParams",function(t,e){return t.get({id:e.id}).$promise}]},controller:["$scope","post","$sce",function(t,e,n){t.post=e,t.content=function(){return e.pretty||(e.pretty=n.trustAsHtml(e.content.replace(/\n/g,"<br>"))),e.pretty}}]})}]),app.controller("post.list.controller",["$scope","$state","data",function(t,e,n){t.data=n,t.getPages=function(){for(var t=[],e=1;e<=n.pagination.totalPages;e++)t.push(e);return t},t.isFirstPage=function(){return 1===n.pagination.current},t.isLastPage=function(){return n.pagination.current===n.pagination.totalPages},t.previous=function(){t.isFirstPage()||e.go("archive",{page:n.pagination.current-1})},t.next=function(){t.isLastPage()||e.go("archive",{page:n.pagination.current+1})},t.isCurrent=function(t){return n.pagination.current===t}}]),app.config(["$stateProvider",function(t){t.state({name:"home",url:"/",controller:"post.list.controller",templateUrl:"templates/home.html",resolve:{data:["Posts","Settings",function(t,e){return t.get({pageSize:e.pageSize}).$promise}]}}).state({name:"archive",url:"/archive/:page",controller:"post.list.controller",templateUrl:"templates/archive.html",resolve:{data:["Posts","$stateParams","Settings",function(t,e,n){return t.get({page:e.page,pageSize:n.pageSize}).$promise}]}})}]),app.factory("Posts",["$resource","Settings",function(t,e){return t("api/posts/:id",{id:"@id"},{get:{method:"GET"}})}]);