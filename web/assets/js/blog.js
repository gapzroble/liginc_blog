/*! liginc_blog 2018-10-25 */

var app=angular.module("blogApp",["ui.router","ngResource"]);app.value("settings",{}),app.config(["$urlRouterProvider",function(t){t.otherwise("/")}]),app.filter("postDate",function(){return function(t){console.log("input",t)}}),app.config(["$urlRouterProvider",function(t){t.when("/admin",["$window",function(t){t.location.replace("admin/")}])}]),app.config(["$stateProvider",function(t){t.state({name:"detail",url:"/detail/:id",templateUrl:"templates/single.html",resolve:{post:["Posts","$stateParams",function(t,e){return t.get({id:e.id})}]},controller:["$scope","post","$sce",function(t,e,n){t.post=e,t.content=function(){return e.pretty||(e.pretty=n.trustAsHtml(e.content.replace(/\n/g,"<br>"))),e.pretty}}]})}]),app.controller("post.list.controller",["$scope","$state","data",function(t,e,n){t.data=n,t.getPages=function(){for(var t=[],e=1;e<=n.pagination.totalPages;e++)t.push(e);return t},t.isFirstPage=function(){return 1===n.pagination.current},t.isLastPage=function(){return n.pagination.current===n.pagination.totalPages},t.previous=function(){t.isFirstPage()||e.go("archive",{page:n.pagination.current-1})},t.next=function(){t.isLastPage()||e.go("archive",{page:n.pagination.current+1})},t.isCurrent=function(t){return n.pagination.current===t}}]),app.config(["$stateProvider",function(t){t.state({name:"home",url:"/",controller:"post.list.controller",templateUrl:"templates/home.html",resolve:{data:["Posts",function(t){return t.get()}]}}).state({name:"archive",url:"/archive/:page",controller:"post.list.controller",templateUrl:"templates/archive.html",resolve:{data:["Posts","$stateParams",function(t,e){return t.get({page:e.page})}]}})}]),app.factory("Posts",["$resource",function(t){return t("api/posts/:id",{id:"@id"},{get:{method:"GET"}})}]);