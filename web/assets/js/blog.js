/*! liginc_blog 2018-10-27 */

var app=angular.module("blogApp",["ui.router","ngResource"]);app.value("Settings",{accessToken:"MjRlMTZlM2YzYmZkMjdiODg5ZDU1Y2ZiMTYzNzI3ZWFiYjQxN2RlZWVlMWNiNjgwMTQ2YWQ0MGNjYTkxODhhOA",pageSize:5}),app.config(["$urlRouterProvider",function(t){t.when("/admin",["$window",function(t){t.location.replace("admin/")}]),t.otherwise("/")}]),app.controller("app.controller",["$scope",function(t){t.closeMenu=function(){var t=$(".js-hamburger");t.hasClass("is-active")&&t.trigger("click")}}]),app.run(["$transitions",function(t){t.onSuccess({},function(t){$("a.js-scroll").trigger("click")})}]),app.config(["$stateProvider",function(t){t.state({name:"detail",url:"/post/:id",templateUrl:"templates/single.html",resolve:{post:["Posts","$stateParams",function(t,e){return t.get({id:e.id}).$promise}]},controller:["$rootScope","$scope","post","$sce",function(t,e,r,n){t.pageTitle=r.title,e.post=r,e.content=function(){if(r.pretty)return r.pretty;var t=r.content.replace(/\n/g,"<br>");return r.pretty=n.trustAsHtml(t),r.pretty}}]})}]),app.controller("post.list.controller",["$rootScope","$scope","$state","data",function(t,e,r,n){t.pageTitle=r.is("home")?"Home":"Archive",e.data=n,e.getPages=function(){for(var t=[],e=1;e<=n.pagination.totalPages;e++)t.push(e);return t},e.isFirstPage=function(){return 1===n.pagination.current},e.isLastPage=function(){return n.pagination.current===n.pagination.totalPages},e.previous=function(){e.isFirstPage()||r.go("archive",{page:n.pagination.current-1})},e.next=function(){e.isLastPage()||r.go("archive",{page:n.pagination.current+1})},e.isCurrent=function(t){return n.pagination.current===t}}]),app.config(["$stateProvider",function(t){t.state({name:"home",url:"/",controller:"post.list.controller",templateUrl:"templates/home.html",resolve:{data:["Posts","Settings",function(t,e){return t.get({pageSize:e.pageSize}).$promise}]}}).state({name:"archive",url:"/archive/:page",controller:"post.list.controller",templateUrl:"templates/archive.html",resolve:{data:["Posts","$stateParams","Settings",function(t,e,r){return t.get({page:e.page,pageSize:r.pageSize}).$promise}]}})}]),app.factory("Posts",["$resource","Settings",function(t,e){return t("api/posts/:id",{id:"@id"},{get:{method:"GET",params:{access_token:e.accessToken}}})}]);